#!/bin/bash
# Run all tests for the event system

# Get the directory of this script
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )"

# Make sure we're in the project root directory
cd "$SCRIPT_DIR"

# Run the basic event system tests
echo "Running basic event system tests..."
python -m unittest tests.test_events

# Run the async event system tests if available
if [ -f "tests/test_async_events.py" ]; then
    echo "Running async event system tests..."
    python -m unittest tests.test_async_events
fi

# Optionally run with coverage if available
if command -v coverage &> /dev/null; then
    echo "Running tests with coverage..."
    coverage run -m unittest discover tests
    coverage report -m
fi

echo "All tests completed."